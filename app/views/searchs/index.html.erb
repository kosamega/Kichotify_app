<h1><%= @params %>での検索結果</h1>

<h2>曲</h2>
<% if !@result_musics.empty? %>
    <div class="liked-musics" >
        <% @result_musics.each do |music| %>
            <div class="liked-music-jaket"><%= link_to(image_tag("#{music.album.img_path}",class: "jaket-mini", width: "50px"), "/albums/#{music.album.id}") %></div>
            <div class="liked-music-name"><%= link_to(music.name, "/musics/#{music.id}") %></div>
            <div class="liked-music-album"><%= link_to(music.album.name, "/albums/#{music.album.id}") %></div>
            <div class="liked-music-artist"><%= link_to(music.artist, "/musics/#{music.id}") %></div>
            <div id="like-form-<%=music.id%>" class="album-music-like">
                <% if @like = Like.find_by(user_id: current_user.id, music_id: music.id) %>
                    <%= render "shared/unlike", like: @like , like_index: false %>
                <% else %>
                    <%= render "shared/like", unliked_music: music, like_index: false %>
                <% end %>
            </div>
            <div class="add-playlist">
            <div class="add_playlist-point"><p>…</p></div>
            <div class="select-playlists">
                <div class="select-playlists-close">
                    <p>x</p>
                </div>
                <ul>
                    <% @playlists.each do |playlist| %>
                        <li class="playlist-name">
                            <%= form_with(model: MusicPlaylistRelation.new, local: false) do |f| %>
                                <%= hidden_field_tag :music_id, music.id %>
                                <%= hidden_field_tag :playlist_id, playlist.id %>
                                <%= hidden_field_tag :at_playlist_show, false %>
                                <%= button_tag type: :submit, class: "like-btn" do %>
                                    <%=playlist.name%>
                                <% end %>
                            <% end %>
                        </li>
                    <% end %>
                </ul>
            </div>
        </div>
        <% end %>
    </div>
    <% else %>
    <p><%= @params %>を含む曲は見つかりませんでした<p>
<% end %>

<h2>ユーザー</h2>
<% if !@result_users.empty?%>
        <ul>
            <% @result_users.each do |user| %>
                <li><%= link_to(user.name, "/users/#{user.id}") %></li>
            <% end %>
        </ul>
    
<% else%>
    <p><%= @params %>を含むユーザーは見つかりませんでした<p>
<% end %>

<h2>プレイリスト</h2>
<% if !@result_playlists.empty?%>
        <ul>
            <% @result_playlists.each do |playlist| %>
                <li><%= link_to("#{playlist.user.name}　#{playlist.name}", "/playlists/#{playlist.id}") %></li>
            <% end %>
        </ul>
    
<% else%>
    <p><%= @params %>を含むプレイリストは見つかりませんでした<p>
<% end %>