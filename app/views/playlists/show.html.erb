<div class="edit-playlist">
    <div class="new-playlist-form">
        <div class="new-playlist-form-content">
            <div class="x">
            <i class="fa-solid fa-x x-icon fa-config" class="x"></i>      
            </div>
            <div class="new-playlist-form-content-form">
            <%= form_with(url: "/playlists/#{@playlist.id}", scope: :playlist, local: true, method: :patch) do |f| %>
                <ul>
                    <li><%= f.label :プレイリスト名 %></li>
                    <li><%= f.text_field :name, class: "form-name", value: @playlist.name%></li>
                    <li><%= f.label :説明・コメント %></li>
                    <li><%= f.text_area :comment, class: "new-playlist-comment", value: @playlist.comment  %></li>
                    <li>
                    <%= f.label :公開する do %>
                        <%= f.check_box :public %>
                        <span>公開する</span>
                    <% end %>
                    </li>
                <li><%= f.submit "更新", class: "new-playlist-submit-btn" %></li>

                </ul>
            <% end %>
            </div>
        </div>
    </div>
</div>

<div class="playlist-info">
    <h1><%= @playlist.name %></h1>
    <% if @playlist.public == 1 %>
        <span>公開</span>
    <% else %>
        <span>非公開</span>
    <% end %>
    <h3><%= link_to(@playlist.user.name, "/users/#{@playlist.user.id}") %></h3>
    <div class="playlist-comment">
        <p><%= @playlist.comment %> </p>
    </div>
    <% if current_user == @playlist.user%>
        <div class="playlist-edit-delete">
            <%= link_to("削除", "/playlists/#{@playlist.id}", method: :delete, data: { confirm: "本当に消しますか" }) %>
            <span id="edit-playlist">編集</span>
        </div>
    <% end %>
</div>

<div class="musics-in-the-playlist " >
    <% @musics.each do |music| %>
        <div class="liked-music-jaket"><%= link_to(image_tag("#{music.album.img_path}",class: "jaket-mini", width: "50px"), "/albums/#{music.album.id}") %></div>
        <div class="liked-music-name"><%= link_to(music.name, "/musics/#{music.id}") %></div>
        <div class="liked-music-album"><%= link_to(music.album.name, "/albums/#{music.album.id}") %></div>
        <div class="liked-music-artist"><%= link_to(music.artist, "/musics/#{music.id}") %></div>
        <div class="album-music-like">
            <% if Like.find_by(user_id: current_user.id, music_id: music.id) %>
                <%= link_to("/likes/#{music.id}/destroy", {method: "delete"}) do %>
                    <span class="fa fa-heart liked-btn"></span>
                <% end %>
            <% else %>
                <%= link_to("/likes/#{music.id}/create", {method: "post"}) do%>
                    <span class="fa fa-heart unliked-btn"></span>
                <% end %>
            <% end %>
        </div>
        <div class="add-playlist">
            <div class="add_playlist-point"><p>…</p></div>
            <div class="select-playlists">
                <div class="select-playlists-close">
                    <p>x</p>
                </div>
                <ul>
                    <% @playlists.each do |playlist| %>
                        <li><%= link_to(playlist.name, "/music_playlist_relations/create/#{music.id}/#{playlist.id}", method: "post")%></li>
                    <% end %>
                </ul>
            </div>
        </div>
        <div class="music-delete-from-playlist" >
            <%= link_to("削除", "/music_playlist_relations/destroy/#{music.id}/#{@playlist.id}", method: "delete") %>
        </div>
    <% end %>
</div>